RESEARCH PHASE ‚Äî Unit: {props.unitId}

Title: {props.unitName}
Description: {props.unitDescription}
Category: {props.unitCategory}

Your job is to gather all reference materials needed to implement this unit.

{props.evictionContext ? `\n## Merge Queue Eviction Context\n\nThis unit was previously evicted from the speculative merge queue.\nUse this context to focus your investigation on the failure/conflict root cause:\n\n${props.evictionContext}\n` : ''}

{props.rfcSource ? `\nRead the full RFC specification: ${props.rfcSource}` : ''}
{props.rfcSections && props.rfcSections.length > 0 ? `\n## RFC Sections\nFocus on: ${props.rfcSections.join(', ')}` : ''}

## Reference Paths

{props.referencePaths && props.referencePaths.length > 0 ? `Read these reference paths:\n${props.referencePaths.map(p => `- ${p}`).join('\n')}` : ''}

## Steps

1. **Read the specs** ‚Äî Review all relevant specification documents
2. **Read reference materials** ‚Äî Browse reference documentation for patterns and examples
3. **Read existing implementation** ‚Äî Read any files listed in the ticket's relevantFiles
4. **Write context file** ‚Äî Write {props.contextFilePath} with all paths and summaries

{props.referenceFiles && props.referenceFiles.length > 0 ? `\nHinted reference files:\n${props.referenceFiles.map(f => `- ${f}`).join('\n')}` : ''}

{props.relevantFiles && props.relevantFiles.length > 0 ? `\nRelevant codebase files:\n${props.relevantFiles.map(f => `- ${f}`).join('\n')}` : ''}

## Commit

After writing the context file:
1. `jj describe -m "üìù docs(unit): gather research for ${props.unitId}"`
2. `jj new`
3. {`jj bookmark set ${props.branchPrefix || "unit/"}${props.unitId} -r @`}
4. {`jj git push --bookmark ${props.branchPrefix || "unit/"}${props.unitId}`}
